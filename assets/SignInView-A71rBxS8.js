import{L as C,m as M,f as u,j as v,n as a,w as V,i as r,u as N,k as w,l as s,S as U,p as o,Q as B,q as c,T as E,U as I}from"./index-DVzcaiEy.js";const L={class:"d-flex flex-wrap justify-content-center aling-items-center my-17"},T={key:0,class:"mb-11 py-11 alert alert-danger"},j={class:"mb-8"},h={class:"mb-8"},z={class:"mb-11 text-center"},D=["disabled"],G={__name:"SignInView",setup(Q){const y=N(),_=C(),k=M(),{openLoading:S,closeLoading:p}=_,{pushMessage:b}=k,g=u(),d=u(""),l=u({email:"",password:""});async function F(){var i,e;S();try{const t=await E(l.value),{data:n}=t.data;I(n.token),g.value.resetForm(),b({style:"success",title:"登入成功",text:"登入成功，將跳轉至首頁"}),y.push("/"),p()}catch(t){b({style:"danger",title:"登入失敗",text:"登入失敗請，重新登入"}),d.value=((e=(i=t.response)==null?void 0:i.data)==null?void 0:e.message)||"登入失敗，請重新登入",p()}}return(i,e)=>{const t=r("VField"),n=r("ErrorMessage"),q=r("router-link"),R=r("VForm");return w(),v("section",L,[a(R,{class:"accountForm bg-white rounded-3 shadow",onSubmit:F,ref_key:"formRef",ref:g},{default:V(({errors:f,meta:x})=>[e[6]||(e[6]=s("h1",{class:"mb-11 text-center h3"},"登入",-1)),e[7]||(e[7]=s("p",{class:"mb-11 text-center text-muted lh-lg"},[o(" 歡迎回到 我的秘密食譜， "),s("span",{class:"d-block"}," 一起探索更多美味與驚喜靈感吧！ ")],-1)),d.value?(w(),v("p",T,[e[2]||(e[2]=s("i",{class:"bi bi-exclamation-triangle-fill me-4"},null,-1)),o(" "+B(d.value),1)])):U("",!0),s("div",j,[e[3]||(e[3]=s("label",{for:"email",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),o(" 電子信箱： ")],-1)),a(t,{type:"email",name:"電子信箱",id:"email",class:c(["form-control",{"is-invalid":f.電子信箱}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:l.value.email,"onUpdate:modelValue":e[0]||(e[0]=m=>l.value.email=m),required:""},null,8,["class","modelValue"]),a(n,{name:"電子信箱",class:"text-danger"})]),s("div",h,[e[4]||(e[4]=s("label",{for:"password",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),o(" 密碼： ")],-1)),a(t,{type:"password",name:"密碼",id:"password",class:c(["form-control",{"is-invalid":f.密碼}]),placeholder:"請輸入密碼",rules:"required",modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=m=>l.value.password=m),required:""},null,8,["class","modelValue"]),a(n,{name:"密碼",class:"text-danger"})]),e[8]||(e[8]=s("p",{class:"mb-11 text-end"},[s("a",{href:"#",class:"text-decoration-underline"},"忘記密碼？")],-1)),s("div",z,[s("button",{type:"submit","aria-disabled":"true",class:c(["w-75 btn btn-primary",{disabled:!x.valid}]),disabled:!x.valid}," 立即登入 ",10,D)]),a(q,{to:"/signUp",class:"d-block text-end text-decoration-underline"},{default:V(()=>e[5]||(e[5]=[o(" 還未註冊會員？立即註冊 ")])),_:1})]),_:1},512)])}}};export{G as default};
