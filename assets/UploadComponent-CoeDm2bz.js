import{L as C,m as S,f as m,j as o,k as l,l as t,y as b,P as v,p as B,Q as f,F as T,ag as j}from"./index-DPTUyPy5.js";const F={key:0},P={class:"position-relative mb-11 mb-xl-17 border rounded-3"},D={class:"text-center"},$={key:1},M={for:"image",class:"w-100 mb-11 mb-xl-17 border rounded-3 overflow-hidden"},N={key:1,class:"uploadLabelBtn cursorPointer d-flex flex-column justify-content-center align-items-center fs-5"},O={for:"image",class:"d-block text-center"},V={class:"btn btn-primary w-75"},E={__name:"UploadComponent",props:{tempImageUrl:{type:String,default:""},imageType:{type:String,default:"avatar"}},emits:["updateImage"],setup(a,{emit:y}){const k=C(),w=S(),{openLoading:x,closeLoading:u}=k,{pushMessage:g}=w,I=a,h=y,i=m(""),r=m(!1),c=m("");function U(s){const e=s.target.files[0];if(e){i.value=e;let n=window.URL.createObjectURL(e);r.value=!0,c.value=n}}function p(){i.value="",c.value="",r.value=!1,window.URL.revokeObjectURL(i.value)}async function L(){var e,n;const s=new FormData;s.append("image",i.value),x();try{const d=await j(s,I.imageType),{status:_,data:R}=d.data;_==="success"?h("updateImage",R.imageUrl):g({style:"danger",title:"上傳失敗",text:"上傳失敗，請重整網頁"}),p(),u()}catch(d){g({style:"danger",title:"上傳失敗",text:((n=(e=d.response)==null?void 0:e.data)==null?void 0:n.message)||"上傳失敗，請重整網頁"}),u()}}return(s,e)=>(l(),o(T,null,[t("input",{type:"file",accept:"image/*",id:"image",name:"image",class:"d-none",onChange:U},null,32),r.value?(l(),o("div",F,[t("div",P,[t("a",{href:"#",class:"previewResetBtn position-absolute top-0 right-0 px-2 text-white fs-2",onClick:e[0]||(e[0]=b(n=>p(),["prevent"]))},e[1]||(e[1]=[t("i",{class:"bi bi-x"},null,-1)])),t("div",{class:"previewImage backgound-cover rounded-3",style:v({backgroundImage:`url(${c.value})`})},null,4)]),t("div",D,[t("button",{type:"button",class:"btn btn-primary w-75",onClick:b(L,["prevent"])}," 確認更新 ")])])):(l(),o("div",$,[t("label",M,[a.tempImageUrl?(l(),o("span",{key:0,class:"uploadLabelImage backgroundCover cursorPointer d-block",style:v({backgroundImage:`url(${a.tempImageUrl})`})},null,4)):(l(),o("span",N,[e[2]||(e[2]=t("i",{class:"bi bi-cloud-arrow-up d-block display-3"},null,-1)),B(" 點擊上傳"+f(a.imageType==="avatar"?"頭像":"封面"),1)]))]),t("label",O,[t("span",V,f(a.imageType==="avatar"?"更新頭像":"更新封面"),1)])]))],64))}};export{E as _};
