import{L as C,m as M,f as u,j as w,n as t,w as c,i as r,u as N,k as V,l as s,S as U,p as o,Q as B,q as p,T as E,U as I}from"./index-COHeyXnq.js";const L={class:"d-flex flex-wrap justify-content-center aling-items-center my-17"},T={key:0,class:"mb-11 py-11 alert alert-danger"},j={class:"mb-8"},h={class:"mb-8"},z={class:"mb-11 text-end"},D={class:"mb-11 text-center"},Q=["disabled"],H={__name:"SignInView",setup(A){const y=N(),k=C(),S=M(),{openLoading:F,closeLoading:b}=k,{pushMessage:g}=S,f=u(),d=u(""),l=u({email:"",password:""});async function q(){var i,e;F();try{const a=await E(l.value),{data:n}=a.data;I(n.token),f.value.resetForm(),g({style:"success",title:"登入成功",text:"登入成功，將跳轉至首頁"}),y.push("/"),b()}catch(a){g({style:"danger",title:"登入失敗",text:"登入失敗請，重新登入"}),d.value=((e=(i=a.response)==null?void 0:i.data)==null?void 0:e.message)||"登入失敗，請重新登入",b()}}return(i,e)=>{const a=r("VField"),n=r("ErrorMessage"),x=r("router-link"),R=r("VForm");return V(),w("section",L,[t(R,{class:"accountForm bg-white rounded-3 shadow",onSubmit:q,ref_key:"formRef",ref:f},{default:c(({errors:v,meta:_})=>[e[7]||(e[7]=s("h1",{class:"mb-11 text-center h3"},"登入",-1)),e[8]||(e[8]=s("p",{class:"mb-11 text-center text-muted lh-lg"},[o(" 歡迎回到 我的秘密食譜， "),s("span",{class:"d-block"}," 一起探索更多美味與驚喜靈感吧！ ")],-1)),d.value?(V(),w("p",T,[e[2]||(e[2]=s("i",{class:"bi bi-exclamation-triangle-fill me-4"},null,-1)),o(" "+B(d.value),1)])):U("",!0),s("div",j,[e[3]||(e[3]=s("label",{for:"email",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),o(" 電子信箱： ")],-1)),t(a,{type:"email",name:"電子信箱",id:"email",class:p(["form-control",{"is-invalid":v.電子信箱}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:l.value.email,"onUpdate:modelValue":e[0]||(e[0]=m=>l.value.email=m),required:""},null,8,["class","modelValue"]),t(n,{name:"電子信箱",class:"text-danger"})]),s("div",h,[e[4]||(e[4]=s("label",{for:"password",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),o(" 密碼： ")],-1)),t(a,{type:"password",name:"密碼",id:"password",class:p(["form-control",{"is-invalid":v.密碼}]),placeholder:"請輸入密碼",rules:"required",modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=m=>l.value.password=m),required:""},null,8,["class","modelValue"]),t(n,{name:"密碼",class:"text-danger"})]),s("p",z,[t(x,{to:"/forget-password",class:"text-decoration-underline"},{default:c(()=>e[5]||(e[5]=[o(" 忘記密碼？ ")])),_:1})]),s("div",D,[s("button",{type:"submit","aria-disabled":"true",class:p(["w-75 btn btn-primary",{disabled:!_.valid}]),disabled:!_.valid}," 立即登入 ",10,Q)]),t(x,{to:"/signUp",class:"d-block text-end text-decoration-underline"},{default:c(()=>e[6]||(e[6]=[o(" 還未註冊會員？立即註冊 ")])),_:1})]),_:1},512)])}}};export{H as default};
